
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Use automated dynamic reports &#8212; ISMRM&#39;22 QC Book</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Quality Control in preclinical MRI: Where do artifacts come from and how to fix them" href="../animal-qc/intro.html" />
    <link rel="prev" title="Create and consistently perform control analyses" href="Example3.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">ISMRM'22 QC Book</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../welcome.html">
                    Welcome!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  preamble
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../preamble/step0.html">
   Before we start: How to follow this tutorial
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../preamble/qa-qc-basics.html">
   Before we dive into QA/QC : Definitions and terminology
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../preamble/define-qa-qc.html">
   Defining QC and QA
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../preamble/qc-and-neuroimaging.html">
   QC and Neuroimaging
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Dataset QC
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Example1.html">
   Is a task repetitive, boring, and/or error-prone? Script it!
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Example2.html">
   Highlight important and diagnostic features as efficiently as possible
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Example3.html">
   Create and consistently perform control analyses
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Use automated dynamic reports
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Animal QA/QC
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../animal-qc/intro.html">
   Quality Control in preclinical MRI: Where do artifacts come from and how to fix them
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../animal-qc/acquisition.html">
   Idiosyncrasies of acquiring data from small animals
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../animal-qc/acquisition_examples.html">
   “What went wrong?” data acquisition edition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../animal-qc/processing.html">
   Idiosyncrasies of processing MRI data from small animals
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../animal-qc/processing_examples.html">
   “What went wrong?” data processing edition
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Automating QA
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../auto-qc/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../auto-qc/iqms_first_contact.html">
   Understanding IQMs generated by MRIQC
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../auto-qc/dimensionality_reduction.html">
   Reducing the dimensionality of the metrics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../auto-qc/classification.html">
   Making predictions about quality
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/nipreps/qc-book/main?urlpath=lab/tree/docs/dataset-qc/Example4.Rmd"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
      <li>
        <a href="https://ismrm.dandiarchive.org/hub/user-redirect/git-pull?repo=https%3A//github.com/nipreps/qc-book&urlpath=lab/tree/qc-book/docs/dataset-qc/Example4.Rmd&branch=main"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on JupyterHub"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_jupyterhub.svg">
  </span>
<span class="headerbtn__text-container">JupyterHub</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>
<a href="https://github.com/nipreps/qc-book"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="bottom"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/dataset-qc/Example4.Rmd"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.Rmd</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-are-automated-dynamic-reports">
   What are automated dynamic reports?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#some-suggestions-for-using-automated-dynamic-reports">
   Some suggestions for using automated dynamic reports
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#keep-variables-consistent-and-non-creative">
     Keep variables consistent and non-creative
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#use-batch-scripts-to-compile-many-reports">
     Use batch scripts to compile many reports
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tying-it-together">
   Tying it together
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Use automated dynamic reports</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-are-automated-dynamic-reports">
   What are automated dynamic reports?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#some-suggestions-for-using-automated-dynamic-reports">
   Some suggestions for using automated dynamic reports
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#keep-variables-consistent-and-non-creative">
     Keep variables consistent and non-creative
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#use-batch-scripts-to-compile-many-reports">
     Use batch scripts to compile many reports
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tying-it-together">
   Tying it together
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="use-automated-dynamic-reports">
<h1>Use automated dynamic reports<a class="headerlink" href="#use-automated-dynamic-reports" title="Permalink to this headline">#</a></h1>
<section id="what-are-automated-dynamic-reports">
<h2>What are automated dynamic reports?<a class="headerlink" href="#what-are-automated-dynamic-reports" title="Permalink to this headline">#</a></h2>
<p>“Dynamic reports” is a generic term for files (like this notebook) that combine code and text in a single file, which is then compiled to produce a document. The compiled document may be static (html, pdf, etc.) or interactive, and implementations are available for many programming languages (R, python, matlab, etc.), and text styles (markdown, latex, <a class="reference external" href="https://yihui.org/knitr/">knitr</a>, etc.). In research I suggest using dynamic reports in two somewhat different ways: for describing specific one-off analyses, and for dataset QC and other automated analyses.</p>
<p>The first use replaces the common practice of describing the results of any particular analysis in word documents, copy-pasting images and tables in as needed from statistical software. Copy-paste works for small things, but quickly becomes inconvenient, such as if you decide to change a color or symbol, all the plots need to be copy-pasted in again. Identifying the source of each image or statistic (e.g., to change a threshold or check a formula) with only the word document is often time consuming, and may be impossible. Dynamic documents can serve the same purpose of combining text and results for easy sharing, but with the major advantage that the source of images, tables, etc. can be checked, and much more efficiently updated when needed. (I now use knitr for essentially all analyses, whether I expect they will be seen by others or not.)</p>
<p>The second broad use case is that of automation, in which a single <strong>template</strong> is compiled or run many times. For example, for the DMCC we produce a set of standard knitr documents summarizing the data for each participant (an example set is <a class="reference external" href="https://osf.io/7xkq9/">on osf</a>; see also <a class="reference external" href="https://github.com/ccplabwustl/dualmechanisms/">dualmechanisms</a>). We spent a lot of time working out what would be most useful for determining the quality of the various types of data collected during this particular experiment, and then how the information could be efficiently and clearly displayed. But once this was decided and a set of files made to show the data for one participant, the files were converted to templates which can be quickly and easily used for any other participant.</p>
</section>
<section id="some-suggestions-for-using-automated-dynamic-reports">
<h2>Some suggestions for using automated dynamic reports<a class="headerlink" href="#some-suggestions-for-using-automated-dynamic-reports" title="Permalink to this headline">#</a></h2>
<p>There is no single set of best practices when writing dynamic reports or any other type of scientific code, but I will share a few suggestions and thoughts that may both give a sense of what’s possible and reduce the likelihood of problems.</p>
<p>The first set of choices are of which languages to use for the programming and text part of the report, which I believe is largely a matter of personal preference and what your colleagues are using. I use knitr, R, and LaTeX (<a class="reference external" href="https://mvpa.blogspot.com/2020/03/introductory-knitr-tutorial.html">tutorial here</a>), but again, these are not the only options.</p>
<p>An important choice is how the finished documents will be used: will they be compiled to a static file (e.g., pdf, html, word) or to something more interactive (such as this Jupyter notebook)? pdfs and other static documents (assuming the source is stored with the compiled version) have the advantage of always looking the same and being easy to archive and share (such as for a publication’s supplemental information; <a class="reference external" href="https://osf.io/p6msu/">https://osf.io/p6msu/</a> is one of my favorites); once compiled they can be viewed without the need for particular software and their formatting will not change. Interactive documents can be good for teaching and demonstrations, but I think static (compiled to standard formats) is more stable for long-term storage or wide sharing.</p>
<p>A general warning is to be careful about how caching and scoping is handled in whichever report system you use. With R and knitr I habitually clear the environment and cache before compiling a document, and the code chunks are run in top-down order. But caching can allow the figure or statistic from a previous compilation to be improperly included, and some interactive systems allow chunks to be run out of order (<a class="reference external" href="https://yihui.org/en/2018/09/notebook-war/">described here, for example</a>), breaking the (to me, all-important) link between code and displayed result.</p>
<section id="keep-variables-consistent-and-non-creative">
<h3>Keep variables consistent and non-creative<a class="headerlink" href="#keep-variables-consistent-and-non-creative" title="Permalink to this headline">#</a></h3>
<p>When writing code for template use, I recommend that the variable changes needed to compile the document for any particular participant (or group, etc.) are clearly explained and collected at the top of the file. Using consistent naming of key variables (such as <code class="docutils literal notranslate"><span class="pre">sub.id</span></code> for subject ID) and flagging key sections helps non-experts navigate the files and simplifies long-term maintenance. For example, the DMCC55B supplemental knitr files all start with a <code class="docutils literal notranslate"><span class="pre">startup</span></code> code chunk such as this from <a class="reference external" href="https://osf.io/yv56d/">behavioralSession_individualDifferences.rnw</a>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># rm(list=ls());     # clear R&#39;s workspace (commented for the demo)</span>
<span class="c1"># options(warnPartialMatchDollar=TRUE);    # safety option: warns if column names specified with $ don&#39;t match exactly</span>

<span class="c1"># change this variable to the local copy of this directory; download from https://openneuro.org/datasets/ds003465/</span>
<span class="n">in.path</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;d:/temp/DMCC_box/DMCC55B/derivatives/questionnaires/&quot;</span><span class="p">;</span><span class="w">  </span>

<span class="c1"># should not need to change the code below here to reproduce the manuscript statistics</span>
<span class="n">use.robust.stats</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">;</span><span class="w">   </span><span class="c1"># whether to use robust statistics or not for the means and SEMs</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="use-batch-scripts-to-compile-many-reports">
<h3>Use batch scripts to compile many reports<a class="headerlink" href="#use-batch-scripts-to-compile-many-reports" title="Permalink to this headline">#</a></h3>
<p>Once a report template is made, other scripts can be used to manage and streamline its compilation. For example, here is part of a <code class="docutils literal notranslate"><span class="pre">startup</span></code> code chunk for a knitr file that generates a report on a a single participant’s performance:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">###### change the variables starting here</span>

<span class="n">sub.id</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;9999&quot;</span><span class="p">;</span><span class="w">    </span><span class="c1">#  subject (participant) id to run this time (in quotes)</span>
<span class="n">use.boxr</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">;</span><span class="w">    </span><span class="c1"># if running this code at wustl and want files downloaded from box.</span>

<span class="n">temp.path</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;d:/temp/&quot;</span><span class="p">;</span><span class="w">   </span>
<span class="c1"># path to a local directory. One file will be written into temp.path as the code runs regardless of the use.boxr setting. </span>

<span class="c1">###### should not need to change any code below here</span>
</pre></div>
</div>
</div>
</div>
<p>If I wanted to compile this report for a dozen participants I could make a dozen copies of the .rnw template, put one subject ID into the <code class="docutils literal notranslate"><span class="pre">sub.id</span></code> variable of each, and then compile each one by clicking the RStudio button, but that is tedious and it’d be easy to make a typo. It is more efficient to use a script to handle the duplication and text edits, such as this (non-executable code):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">out.path</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;d:/temp/out/&quot;</span><span class="p">;</span><span class="w">   </span><span class="c1"># where files will be written</span>
<span class="n">git.path</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;d:/gitFiles/&quot;</span><span class="p">;</span><span class="w">   </span><span class="c1"># local git directory for input template</span>

<span class="n">sub.ids</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;1111&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;2222&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;3333&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1"># subject IDs to run</span>

<span class="c1"># check if out.path exists, and make it if not. (do not run)</span>
<span class="c1"># if (!dir.exists(out.path)) { dir.create(out.path); }</span>

<span class="c1"># in.file &lt;- readLines(paste0(git.path, &quot;template_ERfilmTask.rnw&quot;));   # read in the template knitr</span>
<span class="c1"># for (sub.id in sub.ids) {    # sub.id &lt;- sub.ids[1];</span>
<span class="c1">#  s.path &lt;- paste0(out.path, sub.id, &quot;/&quot;);   # make a subdirectory of out.path for each person</span>
<span class="c1">#  if (!dir.exists(s.path)) { dir.create(s.path); }</span>
<span class="c1">#  </span>
<span class="c1">#  out.file &lt;- gsub(&#39;do.sub &lt;- &quot;9999&quot;;&#39;, paste0(&#39;do.sub &lt;- &quot;&#39;, sub.id, &#39;&quot;;&#39;), in.file);    # put in subject ID</span>
<span class="c1">#  cat(out.file, file=paste0(s.path, sub.id, &quot;_ERfilmTask.rnw&quot;), sep=&quot;\n&quot;);    # write out the knitr template with this person&#39;s info</span>
<span class="c1"># }</span>
</pre></div>
</div>
</div>
</div>
<p>This sort of batch script can also be used to put a single subject ID into multiple templates, to write a script to compile a group of files for one subject ID, etc.</p>
</section>
</section>
<section id="tying-it-together">
<h2>Tying it together<a class="headerlink" href="#tying-it-together" title="Permalink to this headline">#</a></h2>
<p>Dynamic reports can make it straightforward and efficient to highlight important and diagnostic features in your dataset, such as done elsewhere in this section. For example, DMCC55B <a class="reference external" href="https://osf.io/xchwm/">QC_SD_volume.pdf</a> <a class="reference external" href="https://osf.io/3872s/">QC_SD_volume.rnw source</a>, shows temporal standard deviation images for eight runs for each of the 55 participants:
<img alt="../_images/sd.JPG" src="../_images/sd.JPG" /></p>
<p>The <a class="reference external" href="https://osf.io/3872s/">code</a> making this pdf may strike you as surprisingly short: just 135 lines contain the LaTeX, code calling AFNI to create the standard deviation images if needed, and plotting the images themselves.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "r"
        },
        kernelOptions: {
            kernelName: "ir",
            path: "./dataset-qc"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'ir'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="Example3.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Create and consistently perform control analyses</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../animal-qc/intro.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Quality Control in preclinical MRI: Where do artifacts come from and how to fix them</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By The tutorial authors<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>